{"version":3,"sources":["SpinKit.js","Navbar.js","App.js","registerServiceWorker.js","index.js","reducers.js","actions.js","transformers.js"],"names":["SpinKit","props","className","cx","title","updatedAtFormatter","window","Intl","DateTimeFormat","undefined","day","hour","hour12","minute","month","second","year","findFirstNSymbols","n","collection","search","uppercaseSearch","toUpperCase","results","some","iexSymbol","symbol","startsWith","push","length","noop","Suggestion","suggestion","query","highlightedSlice","slice","normalSlice","name","SuggestionValue","Navbar","handleSearchBlur","setState","searchIsFocused","handleSearchFocus","allIexSymbols","dispatch","fetchAllIexSymbols","handleSearchQueryChange","event","currentTarget","nodeName","setSearchQuery","value","handleSearchQueryClear","handleSearchSubmit","preventDefault","handleSetIexApiKey","setIexApiKey","state","nextIexApiKey","closeActiveModal","handleSuggestionSelected","suggestionValue","history","activeModal","openSettingsModal","type","iexApiKey","setNextIexApiKey","target","toggle","isOpen","searchQuery","searchResults","nextSearchQuery","this","fetchErrorMessage","updatedAt","color","dark","expand","tag","NavLink","to","onClick","navbar","action","inline","onSubmit","getSuggestionValue","highlightFirstSuggestion","inputProps","onBlur","onChange","onFocus","placeholder","onSuggestionsClearRequested","onSuggestionsFetchRequested","onSuggestionSelected","renderSuggestion","suggestions","theme","container","input","suggestionsContainer","suggestionsList","suggestionHighlighted","isLoading","aria-label","role","dateTime","Date","toISOString","format","size","htmlFor","id","required","outline","React","withRouter","connect","isFetchingCount","Overview","Performance","Stock","Transactions","LoadingIndicator","App","useDispatch","fetchAllQuotes","component","fallback","exact","path","href","isLocalhost","Boolean","location","hostname","match","registerValidSW","swUrl","navigator","serviceWorker","register","then","registration","onupdatefound","installingWorker","installing","onstatechange","controller","console","log","catch","error","rootElement","document","getElementById","Error","composeEnhancers","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","store","createStore","nextSymbols","symbols","indexOf","transaction","nextTransactionId","transactions","Set","newTransactions","map","add","newTransaction","Array","from","concat","appSettings","pageSize","filter","documentBody","body","csvData","csvStringify","transformStocksToGf","quotes","columns","header","blob","Blob","a","createElement","url","URL","createObjectURL","download","style","display","appendChild","click","revokeObjectURL","isFetchingAllIexSymbols","charts","symbolData","chart","quote","message","now","applyMiddleware","thunk","persistState","key","ReactDOM","render","process","origin","addEventListener","fetch","response","status","headers","get","ready","unregister","reload","checkValidServiceWorker","registerServiceWorker","fetchAllQuotesTimeout","IEX_ROOT","addTransaction","changePageSize","nextPageSize","deletePortfolio","deleteSymbols","deleteTransactions","downloadPortfolio","clearFetchQuotesTimeout","clearTimeout","fetchSymbolData","getState","json","setFetchQuotesTimeout","setTimeout","encodeURIComponent","join","data","nextQuotes","Object","keys","forEach","finally","importTransactionsFile","file","fileReader","FileReader","onerror","onload","parsedCsv","csvParse","result","transformGfToStocks","readAsText","gfTransactions","cashValue","parseFloat","commission","Commission","date","notes","Notes","price","Price","shares","Shares","Symbol","Type","stocksTransactions","Name","companyName"],"mappings":"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","file":"static/js/main.0eaecdbc.chunk.js","sourcesContent":["/* @flow */\n\nimport \"./SpinKit.css\";\nimport * as React from \"react\";\nimport cx from \"classnames\";\n\ntype Props = {\n  className?: string,\n  title?: string,\n  type: \"folding-cube\",\n};\n\nexport default function SpinKit(props: Props): React.Node {\n  return (\n    <div className={cx(\"sk-folding-cube-wrapper\", props.className)}>\n      <div className=\"sk-folding-cube\" title={props.title}>\n        <div className=\"sk-cube1 sk-cube\" />\n        <div className=\"sk-cube2 sk-cube\" />\n        <div className=\"sk-cube4 sk-cube\" />\n        <div className=\"sk-cube3 sk-cube\" />\n      </div>\n    </div>\n  );\n}\n","/* @flow */\n\nimport \"./Navbar.css\";\nimport * as React from \"react\";\nimport {\n  Button,\n  Collapse,\n  Form,\n  Modal,\n  ModalBody,\n  ModalFooter,\n  Navbar as ReactstrapNavbar,\n  NavbarBrand,\n  NavbarToggler,\n} from \"reactstrap\";\nimport type { Dispatch, IEXSymbol } from \"./Types\";\nimport { NavLink, type RouterHistory, withRouter } from \"react-router-dom\";\nimport { fetchAllIexSymbols, setIexApiKey } from \"./actions\";\nimport Autosuggest from \"react-autosuggest\";\nimport SpinKit from \"./SpinKit\";\nimport { connect } from \"react-redux\";\nimport cx from \"classnames\";\n\ntype RouterProps = {\n  history: RouterHistory,\n};\n\ntype StateProps = {\n  allIexSymbols: ?Array<IEXSymbol>,\n  fetchErrorMessage: ?string,\n  iexApiKey: ?string,\n  isLoading: boolean,\n  updatedAt: ?number,\n};\n\ntype ConnectProps = StateProps & { dispatch: Dispatch };\n\ntype Props = RouterProps & ConnectProps;\n\ntype State = {\n  activeModal: ?{ type: \"settings\" },\n  isOpen: boolean,\n  nextIexApiKey: string,\n  searchIsFocused: boolean,\n  searchQuery: string,\n  searchResults: Array<IEXSymbol>,\n};\n\nconst updatedAtFormatter = new window.Intl.DateTimeFormat(undefined, {\n  day: \"numeric\",\n  hour: \"numeric\",\n  hour12: false,\n  minute: \"numeric\",\n  month: \"numeric\",\n  second: \"numeric\",\n  year: \"numeric\",\n});\n\nfunction findFirstNSymbols(n: number, collection: Array<IEXSymbol>, search: string) {\n  // Symbols are always uppercase, ensure uppercase to match.\n  const uppercaseSearch = search.toUpperCase();\n  const results: Array<IEXSymbol> = [];\n  collection.some((iexSymbol) => {\n    if (iexSymbol.symbol.startsWith(uppercaseSearch)) {\n      results.push(iexSymbol);\n      if (results.length === n) return true;\n    }\n    return false;\n  });\n  return results;\n}\n\nfunction noop() {}\n\nfunction Suggestion(suggestion: IEXSymbol, { query }: { query: string }) {\n  // This is a simple prefix search (see `findFirstNSymbols`), so the starting index to highlight\n  // is assumed to be 0.\n  const highlightedSlice = suggestion.symbol.slice(0, query.length);\n  const normalSlice = suggestion.symbol.slice(query.length);\n  return (\n    <span>\n      <strong>{highlightedSlice}</strong>\n      <span>{normalSlice}</span> - {suggestion.name}\n    </span>\n  );\n}\n\nfunction SuggestionValue(suggestion: IEXSymbol) {\n  return suggestion.symbol;\n}\n\nclass Navbar extends React.Component<Props, State> {\n  constructor(props: Props) {\n    super(props);\n    this.state = {\n      activeModal: null,\n      isOpen: false,\n      nextIexApiKey: \"\",\n      searchIsFocused: false,\n      searchQuery: \"\",\n      searchResults: [],\n    };\n  }\n\n  handleSearchBlur = () => {\n    this.setState({ searchIsFocused: false });\n  };\n\n  handleSearchFocus = () => {\n    if (this.props.allIexSymbols == null) {\n      this.props.dispatch(fetchAllIexSymbols());\n    }\n    this.setState({ searchIsFocused: true });\n  };\n\n  handleSearchQueryChange = (event: SyntheticInputEvent<HTMLInputElement>) => {\n    if (event.currentTarget.nodeName !== \"INPUT\") return;\n    this.setSearchQuery(event.currentTarget.value);\n  };\n\n  handleSearchQueryClear = () => {\n    this.setSearchQuery(\"\");\n  };\n\n  handleSearchSubmit = (event: SyntheticEvent<HTMLFormElement>) => {\n    event.preventDefault();\n  };\n\n  handleSetIexApiKey = (event: SyntheticEvent<HTMLFormElement>) => {\n    event.preventDefault();\n    this.props.dispatch(setIexApiKey(this.state.nextIexApiKey));\n    this.closeActiveModal();\n  };\n\n  handleSuggestionSelected = (event: Event, { suggestionValue }: { suggestionValue: string }) => {\n    this.props.history.push(`/stocks/${suggestionValue}`);\n  };\n\n  setSearchQuery(nextSearchQuery: string) {\n    this.setState({\n      searchQuery: nextSearchQuery,\n      searchResults:\n        this.props.allIexSymbols == null\n          ? []\n          : findFirstNSymbols(5, this.props.allIexSymbols, nextSearchQuery),\n    });\n  }\n\n  closeActiveModal = () => {\n    this.setState({ activeModal: null });\n  };\n\n  openSettingsModal = () => {\n    this.setState({\n      activeModal: { type: \"settings\" },\n      nextIexApiKey: this.props.iexApiKey == null ? \"\" : this.props.iexApiKey,\n    });\n  };\n\n  setNextIexApiKey = (event) => {\n    this.setState({ nextIexApiKey: event.target.value });\n  };\n\n  toggle = () => {\n    this.setState({ isOpen: !this.state.isOpen });\n  };\n\n  render() {\n    // Create local references to enable Flow refinement beyond `null | undefined`.\n    const { fetchErrorMessage, updatedAt } = this.props;\n    return (\n      <ReactstrapNavbar color=\"dark\" dark expand=\"md\">\n        <NavbarBrand className=\"text-warning\" tag={NavLink} to=\"/\">\n          Finance!\n        </NavbarBrand>\n        <NavbarToggler onClick={this.toggle} />\n        <Collapse isOpen={this.state.isOpen} navbar>\n          <Form\n            action=\"/finance/stocks\"\n            className=\"mr-auto\"\n            inline\n            onSubmit={this.handleSearchSubmit}\n          >\n            <Autosuggest\n              getSuggestionValue={SuggestionValue}\n              highlightFirstSuggestion\n              inputProps={{\n                name: \"symbol\",\n                onBlur: this.handleSearchBlur,\n                onChange: this.handleSearchQueryChange,\n                onFocus: this.handleSearchFocus,\n                placeholder: \"Search...\",\n                value: this.state.searchQuery,\n              }}\n              onSuggestionsClearRequested={this.handleSearchQueryClear}\n              onSuggestionsFetchRequested={noop}\n              onSuggestionSelected={this.handleSuggestionSelected}\n              renderSuggestion={Suggestion}\n              suggestions={this.state.searchResults}\n              theme={{\n                container: \"autosuggest\",\n                input: cx(\"dark-transition form-control\", {\n                  \"bg-dark\": !this.state.searchIsFocused,\n                }),\n                suggestionsContainer: \"dropdown\",\n                suggestionsList: `dropdown-menu ${\n                  this.state.searchResults.length > 0 ? \"show\" : \"\"\n                }`,\n                suggestion: \"dropdown-item\",\n                suggestionHighlighted: \"active\",\n              }}\n            />\n          </Form>\n          {this.props.isLoading ? (\n            <SpinKit title=\"Fetching new quotes...\" type=\"folding-cube\" />\n          ) : null}\n          {fetchErrorMessage == null ? null : (\n            <abbr className=\"mr-1\" title={`Error: ${fetchErrorMessage}`}>\n              <span aria-label=\"Connection error\" className=\"text-danger\" role=\"img\">\n                ⚠️\n              </span>\n            </abbr>\n          )}\n          <small>\n            <span className=\"text-white-50\">Quotes last fetched: </span>\n            {updatedAt == null ? (\n              <span className=\"text-white\">never</span>\n            ) : (\n              <time className=\"text-white\" dateTime={new Date(updatedAt).toISOString()}>\n                {updatedAtFormatter.format(updatedAt)}\n              </time>\n            )}\n          </small>\n          <Button className=\"ml-2\" onClick={this.openSettingsModal} size=\"sm\">\n            Settings\n          </Button>\n        </Collapse>\n        <Modal\n          isOpen={this.state.activeModal != null && this.state.activeModal.type === \"settings\"}\n          toggle={this.closeActiveModal}\n        >\n          <form onSubmit={this.handleSetIexApiKey}>\n            <ModalBody>\n              <div className=\"form-group\">\n                <label htmlFor=\"apiKey\">IEX Publishable API Key</label>\n                <input\n                  className=\"form-control\"\n                  id=\"apiKey\"\n                  name=\"apiKey\"\n                  onChange={this.setNextIexApiKey}\n                  placeholder=\"pk_abc123…\"\n                  value={this.state.nextIexApiKey}\n                  required\n                />\n              </div>\n            </ModalBody>\n            <ModalFooter>\n              <Button color=\"secondary\" onClick={this.closeActiveModal} outline type=\"button\">\n                Cancel\n              </Button>\n              <Button color=\"primary\" type=\"submit\">\n                Save\n              </Button>\n            </ModalFooter>\n          </form>\n        </Modal>\n      </ReactstrapNavbar>\n    );\n  }\n}\n\n// $FlowFixMe: stop using these HOC, switch to hooks\nexport default (withRouter<Navbar>(\n  connect<ConnectProps, {}, _, _, _, _>((state) => ({\n    allIexSymbols: state.allIexSymbols,\n    fetchErrorMessage: state.fetchErrorMessage,\n    iexApiKey: state.iexApiKey,\n    isLoading: state.isFetchingCount > 0,\n    updatedAt: state.updatedAt,\n  }))(Navbar)\n): React.ComponentType<*>);\n","/* @flow */\n\nimport \"./App.css\";\nimport * as React from \"react\";\nimport { HashRouter as Router, Route } from \"react-router-dom\";\nimport { Col, Container, Row } from \"reactstrap\";\nimport type { Dispatch } from \"./types\";\nimport Navbar from \"./Navbar\";\nimport SpinKit from \"./SpinKit\";\nimport { fetchAllQuotes } from \"./actions\";\nimport { useDispatch } from \"react-redux\";\n\nconst Overview = React.lazy(() => import(\"./Overview\"));\nconst Performance = React.lazy(() => import(\"./Performance\"));\nconst Stock = React.lazy(() => import(\"./Stock\"));\nconst Transactions = React.lazy(() => import(\"./Transactions\"));\n\nfunction LoadingIndicator() {\n  return (\n    <div className=\"container my-3\">\n      <div className=\"d-flex align-items-center\">\n        <SpinKit className=\"mr-2\" type=\"folding-cube\" />\n        Loading…\n      </div>\n    </div>\n  );\n}\n\nexport default function App(): React.Node {\n  const dispatch = useDispatch<Dispatch>();\n  React.useEffect(() => {\n    dispatch(fetchAllQuotes());\n  }, [dispatch]);\n\n  return (\n    <Router>\n      <div>\n        {/* Wrap the `Navbar` in a pathless route to ensure it is always rendered and always updates\n            on navigation. Updates are blocked because internally the `Navbar` is wrapped by\n            react-redux's `connect`.\n\n            See: React Router's [\"Dealing With Update Blocking\"][0] */}\n        <Route component={Navbar} />\n        <React.Suspense fallback={<LoadingIndicator />}>\n          <Route exact path=\"/\" component={Overview} />\n          <Route path=\"/performance\" component={Performance} />\n          <Route path=\"/stocks/:symbol\" component={Stock} />\n          <Route path=\"/transactions\" component={Transactions} />\n        </React.Suspense>\n        <footer className=\"bg-light py-4\">\n          <Container>\n            <Row>\n              <Col>\n                <small className=\"text-secondary\">\n                  Created by Ross Allen &lt;\n                  <a className=\"link-secondary\" href=\"https://github.com/ssorallen\">\n                    ssorallen\n                  </a>\n                  &gt;{\" \"}\n                  <span aria-label=\"\" role=\"img\">\n                    🦉\n                  </span>\n                </small>\n              </Col>\n            </Row>\n            <Row>\n              <Col>\n                <small className=\"text-secondary\">\n                  Source available at{\" \"}\n                  <a className=\"link-secondary\" href=\"https://github.com/ssorallen/finance\">\n                    ssorallen/finance\n                  </a>\n                </small>\n              </Col>\n            </Row>\n            <Row>\n              <Col>\n                <small className=\"text-secondary\">\n                  Data provided by{\" \"}\n                  <a className=\"link-secondary\" href=\"https://iexcloud.io\">\n                    IEX Cloud\n                  </a>\n                </small>\n              </Col>\n            </Row>\n          </Container>\n        </footer>\n      </div>\n    </Router>\n  );\n}\n\n// [0]: https://github.com/ReactTraining/react-router/blob/4b61484ec9eea4bc3a2eb36028c47934414542ae/packages/react-router/docs/guides/blocked-updates.md\n","// In production, we register a service worker to serve assets from local cache.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on the \"N+1\" visit to a page, since previously\n// cached resources are updated in the background.\n\n// To learn more about the benefits of this model, read https://goo.gl/KwvDNy.\n// This link also includes instructions on opting out of this behavior.\n\nconst isLocalhost = Boolean(\n  window.location.hostname === \"localhost\" ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === \"[::1]\" ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)\n);\n\nexport default function register() {\n  if (process.env.NODE_ENV === \"production\" && \"serviceWorker\" in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebookincubator/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener(\"load\", () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Lets check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            \"This web app is being served cache-first by a service \" +\n              \"worker. To learn more, visit https://goo.gl/SC7cgQ\"\n          );\n        });\n      } else {\n        // Is not local host. Just register service worker\n        registerValidSW(swUrl);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then((registration) => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === \"installed\") {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the old content will have been purged and\n              // the fresh content will have been added to the cache.\n              // It's the perfect time to display a \"New content is\n              // available; please refresh.\" message in your web app.\n              console.log(\"New content is available; please refresh.\");\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log(\"Content is cached for offline use.\");\n            }\n          }\n        };\n      };\n    })\n    .catch((error) => {\n      console.error(\"Error during service worker registration:\", error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then((response) => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      if (\n        response.status === 404 ||\n        response.headers.get(\"content-type\").indexOf(\"javascript\") === -1\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then((registration) => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl);\n      }\n    })\n    .catch(() => {\n      console.log(\"No internet connection found. App is running in offline mode.\");\n    });\n}\n\nexport function unregister() {\n  if (\"serviceWorker\" in navigator) {\n    navigator.serviceWorker.ready.then((registration) => {\n      registration.unregister();\n    });\n  }\n}\n","/* @flow */\n\nimport \"bootstrap/dist/css/bootstrap.min.css\";\nimport \"react-table/react-table.css\";\nimport { applyMiddleware, compose, createStore } from \"redux\";\nimport App from \"./App\";\nimport type { AppState } from \"./types\";\nimport { Provider } from \"react-redux\";\nimport React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport persistState from \"redux-localstorage\";\nimport reducers from \"./reducers\";\nimport registerServiceWorker from \"./registerServiceWorker\";\nimport thunk from \"redux-thunk\";\n\nconst rootElement = document.getElementById(\"root\");\nif (rootElement == null) throw new Error(\"Missing element #root to render app\");\n\n// Enable Redux Devtools in the browser.\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\n\n// Pass an initial state to `createStore` rather than use a default argument in the reducer to\n// enable 'redux-localstorage' to merge its persisted state with this initial state.\nconst initialState: AppState = {\n  allIexSymbols: null,\n  appSettings: {\n    pageSize: 10,\n  },\n  charts: {},\n  fetchErrorMessage: null,\n  iexApiKey: \"\",\n  isFetchingAllIexSymbols: false,\n  isFetchingCount: 0,\n  nextTransactionId: 1,\n  quotes: {},\n  symbols: [],\n  transactions: [],\n  updatedAt: null,\n};\n\nconst store = createStore(\n  reducers,\n  initialState,\n  composeEnhancers(\n    applyMiddleware(thunk),\n    persistState(\n      // Any keys in the following Array will be persisted from the store to local storage and\n      // re-hydrated when the app re-loads.\n      [\n        \"allIexSymbols\",\n        \"appSettings\",\n        \"iexApiKey\",\n        \"nextTransactionId\",\n        \"quotes\",\n        \"symbols\",\n        \"transactions\",\n        \"updatedAt\",\n      ],\n      {\n        key: \"default\",\n      }\n    )\n  )\n);\n\nReactDOM.render(\n  <Provider store={store}>\n    <App />\n  </Provider>,\n  rootElement\n);\nregisterServiceWorker();\n","/* @flow */\n\nimport type { Action, AppState } from \"./types\";\nimport csvStringify from \"csv-stringify/lib/es5/sync\";\nimport { transformStocksToGf } from \"./transformers\";\n\nexport default function (state: AppState, action: Action): AppState {\n  switch (action.type) {\n    case \"ADD_SYMBOL\": {\n      const nextSymbols =\n        state.symbols.indexOf(action.symbol) === -1\n          ? [...state.symbols, action.symbol]\n          : state.symbols;\n      return {\n        ...state,\n        symbols: nextSymbols,\n      };\n    }\n    case \"ADD_TRANSACTION\": {\n      const nextSymbols =\n        state.symbols.indexOf(action.transaction.symbol) === -1\n          ? [...state.symbols, action.transaction.symbol]\n          : state.symbols;\n\n      // Adding a new Transaction also adds the Transaction's symbol to the list of symbols to\n      // watch.\n      return {\n        ...state,\n        nextTransactionId: state.nextTransactionId + 1,\n        symbols: nextSymbols,\n        transactions: [\n          ...state.transactions,\n          { ...action.transaction, id: state.nextTransactionId },\n        ],\n      };\n    }\n    case \"ADD_TRANSACTIONS\": {\n      // Ensure no duplicate symbols are added.\n      const nextSymbols = new Set(state.symbols);\n      let nextTransactionId = state.nextTransactionId;\n      const newTransactions = action.transactions.map((transaction) => {\n        nextSymbols.add(transaction.symbol);\n        const newTransaction = { ...transaction, id: nextTransactionId };\n        nextTransactionId += 1;\n        return newTransaction;\n      });\n\n      return {\n        ...state,\n        nextTransactionId,\n        symbols: Array.from(nextSymbols),\n        transactions: state.transactions.concat(newTransactions),\n      };\n    }\n    case \"CHANGE_PAGE_SIZE\":\n      return {\n        ...state,\n        appSettings: {\n          ...state.appSettings,\n          pageSize: action.pageSize,\n        },\n      };\n    case \"DELETE_PORTFOLIO\":\n      return {\n        ...state,\n        nextTransactionId: 1,\n        symbols: [],\n        transactions: [],\n      };\n    case \"DELETE_SYMBOLS\": {\n      // Preserve Flow refinement inside `filter` by keeping a reference to `symbols`.\n      const symbols = action.symbols;\n      return {\n        ...state,\n        symbols: state.symbols.filter((symbol) => symbols.indexOf(symbol) === -1),\n      };\n    }\n    case \"DELETE_TRANSACTIONS\": {\n      // Preserve Flow refinement inside `filter` by keeping a reference to `transactions`.\n      const transactions = action.transactions;\n      return {\n        ...state,\n        transactions: state.transactions.filter(\n          (transaction) => transactions.indexOf(transaction) === -1\n        ),\n      };\n    }\n    case \"DOWNLOAD_PORTFOLIO\": {\n      const documentBody = document.body;\n      if (documentBody == null) throw new Error(\"How in the hell did we get here?\");\n\n      const csvData = csvStringify(transformStocksToGf(state.transactions, state.quotes), {\n        columns: [\n          \"Symbol\",\n          \"Name\",\n          \"Type\",\n          \"Date\",\n          \"Shares\",\n          \"Price\",\n          \"Cash value\",\n          \"Commission\",\n          \"Notes\",\n        ],\n        header: true,\n      });\n\n      // The following is some funky funkiness to download a file generated in JS. Get down with\n      // this funk.\n      const blob = new Blob([csvData], { type: \"text/csv\" });\n      const a = document.createElement(\"a\");\n      const url = URL.createObjectURL(blob);\n      a.download = \"My Portfolio.csv\";\n      a.href = url;\n      a.style.display = \"none\";\n      documentBody.appendChild(a);\n      a.click();\n      URL.revokeObjectURL(url);\n\n      return state;\n    }\n    case \"FETCH_ALL_IEX_SYMBOLS_FAILURE\":\n      return {\n        ...state,\n        isFetchingAllIexSymbols: false,\n      };\n    case \"FETCH_ALL_IEX_SYMBOLS_REQUEST\":\n      return {\n        ...state,\n        isFetchingAllIexSymbols: true,\n      };\n    case \"FETCH_ALL_IEX_SYMBOLS_SUCCESS\":\n      return {\n        ...state,\n        allIexSymbols: action.allIexSymbols,\n        isFetchingAllIexSymbols: false,\n      };\n    case \"FETCH_SYMBOL_DATA_REQUEST\":\n      return {\n        ...state,\n        isFetchingCount: state.isFetchingCount + 1,\n      };\n    case \"FETCH_SYMBOL_DATA_FAILURE\":\n      return {\n        ...state,\n        isFetchingCount: state.isFetchingCount - 1,\n      };\n    case \"FETCH_SYMBOL_DATA_SUCCESS\":\n      return {\n        ...state,\n        charts: { ...state.charts, [action.symbol]: action.symbolData.chart },\n        isFetchingCount: state.isFetchingCount - 1,\n        quotes: { ...state.quotes, [action.symbol]: action.symbolData.quote },\n      };\n    case \"FETCH_QUOTES_FAILURE\":\n      return {\n        ...state,\n        fetchErrorMessage: action.error.message,\n        isFetchingCount: state.isFetchingCount - 1,\n      };\n    case \"FETCH_QUOTES_REQUEST\":\n      return {\n        ...state,\n        fetchErrorMessage: null,\n        isFetchingCount: state.isFetchingCount + 1,\n      };\n    case \"FETCH_QUOTES_SUCCESS\":\n      return {\n        ...state,\n        isFetchingCount: state.isFetchingCount - 1,\n        quotes: action.quotes,\n        updatedAt: Date.now(),\n      };\n    case \"SET_IEX_API_KEY\":\n      return {\n        ...state,\n        iexApiKey: action.iexApiKey,\n      };\n    default:\n      return state;\n  }\n}\n","/* @flow */\n\nimport type {\n  AddSymbolAction,\n  AddTransactionAction,\n  AddTransactionsAction,\n  ChangePageSizeAction,\n  DeletePortfolioAction,\n  DeleteSymbolsAction,\n  DeleteTransactionsAction,\n  Dispatch,\n  DownloadPortfolioAction,\n  GetState,\n  SetIexApiKeyAction,\n  ThunkAction,\n  Transaction,\n} from \"./types\";\nimport csvParse from \"csv-parse/lib/es5/sync\";\nimport { transformGfToStocks } from \"./transformers\";\n\nconst IEX_ROOT = \"https://cloud.iexapis.com/v1\";\n\nexport function addSymbol(symbol: string): AddSymbolAction {\n  return { symbol, type: \"ADD_SYMBOL\" };\n}\n\nexport function addTransaction(transaction: Transaction): AddTransactionAction {\n  return { transaction, type: \"ADD_TRANSACTION\" };\n}\n\nexport function addTransactions(transactions: Array<Transaction>): AddTransactionsAction {\n  return { transactions, type: \"ADD_TRANSACTIONS\" };\n}\n\nexport function changePageSize(nextPageSize: number): ChangePageSizeAction {\n  return { pageSize: nextPageSize, type: \"CHANGE_PAGE_SIZE\" };\n}\n\nexport function deletePortfolio(): DeletePortfolioAction {\n  return { type: \"DELETE_PORTFOLIO\" };\n}\n\nexport function deleteSymbols(symbols: Array<string>): DeleteSymbolsAction {\n  return { symbols, type: \"DELETE_SYMBOLS\" };\n}\n\nexport function deleteTransactions(transactions: Array<Transaction>): DeleteTransactionsAction {\n  return { transactions, type: \"DELETE_TRANSACTIONS\" };\n}\n\nexport function downloadPortfolio(): DownloadPortfolioAction {\n  return { type: \"DOWNLOAD_PORTFOLIO\" };\n}\n\nexport function setIexApiKey(iexApiKey: string): SetIexApiKeyAction {\n  return { iexApiKey, type: \"SET_IEX_API_KEY\" };\n}\n\n// A timeout to periodically fetch new quotes.\nlet fetchAllQuotesTimeout: ?TimeoutID;\n\nfunction clearFetchQuotesTimeout() {\n  if (fetchAllQuotesTimeout != null) {\n    clearTimeout(fetchAllQuotesTimeout);\n    fetchAllQuotesTimeout = null;\n  }\n}\n\n// Example data:\n//\n// {\n//   date: '2018-04-09',\n//   open: 169.88,\n//   high: 173.09,\n//   low: 169.845,\n//   close: 170.05,\n//   volume: 29017718,\n//   unadjustedVolume: 29017718,\n//   change: 1.67,\n//   changePercent: 0.992,\n//   vwap: 171.555,\n//   label: 'Apr 9',\n//   changeOverTime: 0,\n// }\nexport function fetchSymbolData(symbol: string): ThunkAction {\n  return function (dispatch: Dispatch, getState: GetState) {\n    dispatch({ type: \"FETCH_SYMBOL_DATA_REQUEST\" });\n    fetch(\n      `${IEX_ROOT}/stock/${symbol}/batch?types=chart,quote&range=1y&token=${getState().iexApiKey}`\n    )\n      .then((response) => {\n        response\n          .json()\n          .then((symbolData) => {\n            dispatch({ symbol, symbolData, type: \"FETCH_SYMBOL_DATA_SUCCESS\" });\n          })\n          .catch((error) => {\n            dispatch({ error, type: \"FETCH_SYMBOL_DATA_FAILURE\" });\n          });\n      })\n      .catch((error) => {\n        dispatch({ error, type: \"FETCH_SYMBOL_DATA_FAILURE\" });\n      });\n  };\n}\n\nexport function fetchAllQuotes(): ThunkAction {\n  return function (dispatch: Dispatch, getState: GetState) {\n    function setFetchQuotesTimeout() {\n      // Because more `fetchQuote` actions might be in flight, ensure the timer is empty and\n      // synchronously create the next one (even though it was cleared once when this action was\n      // first dispatched). This ensures no more than one timeout at a time is pending.\n      clearFetchQuotesTimeout();\n      setTimeout(() => {\n        dispatch(fetchAllQuotes());\n      }, 300000); // Fetch quotes minimally every 5 minutes. (5 * 60 * 1000)\n    }\n\n    const { symbols } = getState();\n    if (symbols.length === 0) {\n      // No need to do anything if there are no symbols to fetch. Restart the timer and bomb out\n      // early.\n      clearFetchQuotesTimeout();\n      setFetchQuotesTimeout();\n      return;\n    }\n\n    clearFetchQuotesTimeout();\n    dispatch({ type: \"FETCH_QUOTES_REQUEST\" });\n    fetch(\n      `${IEX_ROOT}/stock/market/batch?types=quote&token=${\n        getState().iexApiKey\n      }&symbols=${encodeURIComponent(getState().symbols.join(\",\"))}`\n    )\n      .then((response) => {\n        response\n          .json()\n          .then((data) => {\n            // Data comes back under the endpoint from which it was requested. In this case the key\n            // is `quote`. Unzip the response to match the shape of the store.\n            //\n            // See: https://iextrading.com/developer/docs/#batch-requests\n            const nextQuotes = {};\n            Object.keys(data).forEach((symbol) => {\n              nextQuotes[symbol] = data[symbol].quote;\n            });\n            dispatch({ quotes: nextQuotes, type: \"FETCH_QUOTES_SUCCESS\" });\n          })\n          .catch((error) => {\n            dispatch({ error, type: \"FETCH_QUOTES_FAILURE\" });\n          });\n      })\n      .catch((error) => {\n        dispatch({ error, type: \"FETCH_QUOTES_FAILURE\" });\n      })\n      .finally(() => {\n        setFetchQuotesTimeout();\n      });\n  };\n}\n\nexport function fetchAllIexSymbols(): ThunkAction {\n  return function (dispatch: Dispatch, getState: GetState) {\n    dispatch({ type: \"FETCH_ALL_IEX_SYMBOLS_REQUEST\" });\n    fetch(`${IEX_ROOT}/ref-data/symbols?token=${getState().iexApiKey}`)\n      .then((response) => {\n        response\n          .json()\n          .then((data) => {\n            dispatch({ allIexSymbols: data, type: \"FETCH_ALL_IEX_SYMBOLS_SUCCESS\" });\n          })\n          .catch((error) => {\n            dispatch({ error, type: \"FETCH_ALL_IEX_SYMBOLS_FAILURE\" });\n          });\n      })\n      .catch((error) => {\n        dispatch({ error, type: \"FETCH_ALL_IEX_SYMBOLS_FAILURE\" });\n      });\n  };\n}\n\nexport function importTransactionsFile(file: Blob): ThunkAction {\n  return function (dispatch: Dispatch) {\n    dispatch({ type: \"IMPORT_TRANSACTIONS_FILE_REQUEST\" });\n    const fileReader = new FileReader();\n    fileReader.onerror = () => {\n      dispatch({ type: \"IMPORT_TRANSACTIONS_FILE_FAILURE\" });\n    };\n    fileReader.onload = () => {\n      const parsedCsv = csvParse(fileReader.result, { columns: true });\n      dispatch(addTransactions(transformGfToStocks(parsedCsv)));\n      dispatch(fetchAllQuotes());\n      dispatch({ type: \"IMPORT_TRANSACTIONS_FILE_SUCCESS\" });\n    };\n    fileReader.readAsText(file);\n  };\n}\n","/* @flow */\n\nimport type { Quote, Transaction } from \"./types\";\n\ntype GfTransaction = {\n  \"Cash value\": string,\n  Commission: string,\n  Date: string,\n  Name: string,\n  Notes: string,\n  Price: string,\n  Shares: string,\n  Symbol: string,\n  Type: \"Buy\" | \"Sell\",\n};\n\nexport function transformGfToStocks(gfTransactions: Array<GfTransaction>): Array<Transaction> {\n  return gfTransactions.map((transaction) => ({\n    cashValue: transaction[\"Cash value\"] === \"\" ? null : parseFloat(transaction[\"Cash value\"]),\n    commission: parseFloat(transaction.Commission),\n    date: transaction.Date,\n    id: -1, // A real ID is added in the reducer.\n    notes: transaction.Notes,\n    price: parseFloat(transaction.Price),\n    shares: parseFloat(transaction.Shares),\n    symbol: transaction.Symbol,\n    type: transaction.Type,\n  }));\n}\n\nexport function transformStocksToGf(\n  stocksTransactions: Array<Transaction>,\n  quotes: { [symbol: string]: Quote }\n): Array<GfTransaction> {\n  return stocksTransactions.map((transaction) => ({\n    \"Cash value\": transaction.cashValue == null ? \"\" : `${transaction.cashValue}`,\n    Commission: `${transaction.commission}`,\n    Date: transaction.date == null ? \"\" : transaction.date,\n    Name: quotes[transaction.symbol] == null ? \"\" : quotes[transaction.symbol].companyName,\n    Notes: transaction.notes == null ? \"\" : transaction.notes,\n    Price: `${transaction.price}`,\n    Shares: `${transaction.shares}`,\n    Symbol: transaction.symbol,\n    Type: transaction.type,\n  }));\n}\n"],"sourceRoot":""}